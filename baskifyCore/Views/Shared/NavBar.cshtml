@model baskifyCore.Models.UserModel;
<nav class="navigationBar">
    <a class="navigationBarBrand navBarElement" href="/">Baskify</a>

    <div class="navBarElement searchBarContainerParent" id="navbarColor03">
        @using (Html.BeginForm("Search", "Auctions", FormMethod.Post, new { @class = "form-inline my-2 my-lg-0 searchBarContainer" }))
        {
            @Html.TextBox("searchQuery", null, new { @class = "form-control mr-sm-2 searchBar", placeholder = "Search" })
            <Button Class="btn btn-secondary my-2 my-sm-0 searchButton" type="submit">Search</Button>
        }
    </div>
    <div class="navBarElement navUserContainer">

        <div id="userAccount">
            @if (Model.UserRole == 1)
            {
                <div>@Html.DisplayName(Model.FirstName + " " + Model.LastName)</div>
                <div style="font-size:60%; color:gray">
                    User
                </div>
            }
            else if (Model.UserRole == 2)
            {
                <div>@Html.DisplayName(Model.OrganizationName)</div>
                <div style="font-size:60%; color:gray">
                    Organization
                </div>
            }
        </div>
        <img class="userIcon" src="@Model.iconUrl" />

    </div>
    <div class="userDropdown">
        <table style="width: inherit">
            @if (Model.UserRole == baskifyCore.Models.Roles.USER)
            {
                <tr><td onclick="redirect('/account')">My Account</td></tr>
                <tr><td>Raffle Results</td></tr>
                <tr><td>My Ticket Wallet</td></tr>
                <tr><td onclick="redirect('/login/signout')">Sign Out</td></tr>
            }
            else if (Model.UserRole == baskifyCore.Models.Roles.COMPANY)
            {
                <tr><td onclick="redirect('/account')">My Account</td></tr>
                <tr><td>My Raffles</td></tr>
                <tr><td onclick="redirect('/login/signout')">Sign Out</td></tr>
            }
            else
            {
                <tr><td onclick="openSignOnModal()">Sign in</td></tr>
            }
        </table>
    </div>
</nav>
<div id="SignOnModal" class="modal"></div>

<script>
    function openSignOnModal() {
        $.post("/Login/loadSignOnModal/", {}, function (data) {
            $("#SignOnModal").html(data);
            $("#SignOnModal").modal("show");
        });
    }
    function redirect(dest) {
        window.location = dest;
    }

</script>

@if (ViewData["LoginAgain"] != null && (bool)ViewData["LoginAgain"])
{
    <div class="alert alert-dismissible alert-warning">
        <button type="button" class="close" data-dismiss="alert">&times;</button>
        <h4 class="alert-heading">Woops!</h4>
        <p class="mb-0">There was an error, please login and resubmit.</p>
    </div>
    <script>openSignOnModal()</script>
}

@if (Model.UserAlerts != null)
{
    @foreach (UserAlertModel alert in Model.UserAlerts)//print any alerts to user
    {
        <div class="alert alert-dismissible alert-warning" style="margin-bottom: 0;">
            <button type="button" class="close" data-dismiss="alert">&times;</button>
            <h4 class="alert-heading">@alert.AlertHeader</h4>
            <p class="mb-0">@alert.AlertBody</p>
        </div>
    }
}

@if (ViewData["Alert"] != null)//used to pass around temporary realtime alerts
{
    <div class="alert alert-dismissible alert-warning" style="margin-bottom: 0;">
        <button type="button" class="close" data-dismiss="alert">&times;</button>
        <h4 class="alert-heading">Alert!</h4>
        <p class="mb-0">@ViewData["Alert"]</p>
    </div>
}



